"""
확정(진행 의사) 키워드/패턴 정의
- ChatStateManager.handle_user_confirm 에서 사용됩니다.
- 한국어/영어의 간단한 긍정/진행 표현을 커버합니다.
- 정규식은 대소문자 무시(IGNORECASE)로 매칭됩니다.
"""

# 확정/진행 의사 표현 감지를 위한 정규식 패턴들
# 주의: 단순 긍정(네, 예, 좋아요)은 제외하고, 명확하게 '단계 전환'을 요구하는 표현만 포함합니다.
_CONFIRM_PATTERNS = [
    r"다음\s*단계",        # 다음 단계, 다음단계로
    r"다음\s*스텝",        # 다음 스텝
    r"다음으로",           # 다음으로, 다음으로 넘어가죠
    r"넘어가",             # 넘어가죠, 넘어갑시다, 그냥 넘어가세요
    r"넘기",               # 넘기죠, 넘깁시다
    r"패스",               # 패스
    r"진행\s*해",          # 진행해, 진행해주세요, 진행해라
    r"진행\s*시켜",        # 진행시켜
    r"진행\s*할까요",      # 진행할까요?
    r"진행\s*합시다",      # 진행합시다
]

# 계약서 작성 완료 의사 표현 감지를 위한 정규식 패턴들 (finalization 단계 전용)
# 이 패턴이 매칭되면 completed 단계로 전환하고 계약서 전문을 출력합니다.
_CONTRACT_COMPLETION_PATTERNS = [
    r"계약서.*작성.*완료",
    r"계약서.*완료",
    r"작성.*완료",
    r"완료.*하겠습니다",
    r"완료해.*주세요",
    r"작성해.*주세요",
    r"작성해.*주시죠",
    r"계약서.*작성해",
    r"마무리.*해.*주세요",
    r"마무리.*하겠습니다",
    r"최종.*확인.*완료",
    r"최종.*완료",
    r"계약.*진행",
    r"서명.*진행",
]

# ==========================================
# 양측 합의 확인용 키워드 정의
# chat_ws.py의 step advance 로직에서 사용됨
# ==========================================

# 확정 키워드: 명시적 동의/합의 표현만 포함
# 한쪽이 이미 제안한 조건에 대해 상대방이 수락할 때 사용되는 표현
CONFIRM_KEYWORDS = [
    "합의합니다",      # 명시적 합의
    "동의합니다",      # 명시적 동의
    "진행하겠습니다",  # 진행 의사 표현
    "알겠습니다",      # 이해/수락
    "네",              # 단순 긍정
    "괜찮습니다",      # 수락
]

# 제안 키워드: 조건 제시/질문 (아직 상대방의 동의 필요)
# 한쪽이 조건을 제안할 때 사용되는 표현
PROPOSAL_KEYWORDS = [
    "합의하시죠",      # 조건 제안
    "어떨까요",        # 제안/질문
    "가능할까요",      # 가능성 질문
    "어떻게 생각하시나요",  # 의견 묻기
    "괜찮으신가요",    # 확인 질문
    "그럼 어떨까요",   # 절충안 제안
    "으로 할까요",     # 조건 제안
    "으로 하시죠",     # 약한 제안
    "하죠",            # 제안 (예: 130만원에 하죠)
    "합시다",          # 제안 (예: 이렇게 합시다)
    "제안합니다",      # 명시적 제안
    "맞춰주시면",      # 조건부 제안
    "부탁드립니다",    # 요청/제안
]
